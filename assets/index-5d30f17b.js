var qe=Object.defineProperty;var We=(t,e,n)=>e in t?qe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Se=(t,e,n)=>(We(t,typeof e!="symbol"?e+"":e,n),n),Te=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var f=(t,e,n)=>(Te(t,e,"read from private field"),n?n.call(t):e.get(t)),B=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},xe=(t,e,n,s)=>(Te(t,e,"write to private field"),s?s.call(t,n):e.set(t,n),n);var p=(t,e,n)=>(Te(t,e,"access private method"),n);import{r as L,j as l}from"./index-39e59d1b.js";import{a as V,C as Xe}from"./axios-5dd47180.js";import{U as Qe,S as et,D as tt,n as K,e as nt}from"./save_excel-20c67c55.js";import{F as M,a as Ce,T as Me,b as st,P as rt,D as Oe}from"./index-0b04bfef.js";import{I as ye,S as I,P as it}from"./index-79ab416f.js";import{B as R,E as at}from"./EditOutlined-7d252656.js";import{S as lt}from"./index-d3d823b7.js";import{L as ot}from"./index-ae6442ee.js";const ct={ethereum:"https://eth.llamarpc.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};async function ne(t,e){try{let n=ct[e];if(!n)return"Error: Invalid Network Name";let a=(await V.post(n,{jsonrpc:"2.0",method:"eth_getBalance",params:[t,"latest"],id:1})).data.result;return(parseInt(a,16)/10**18).toFixed(3)}catch(n){return console.error(n),"Error"}}const dt={ethereum:"https://eth.llamarpc.com",optimism:"https://optimism-mainnet.public.blastapi.io",arbitrum:"https://rpc.ankr.com/arbitrum",polygon:"https://polygon-bor.publicnode.com",bsc:"https://bscrpc.com"};async function se(t,e){try{let n=dt[e];if(!n)return"Error: Invalid Network Name";const a=(await V.post(n,{jsonrpc:"2.0",method:"eth_getTransactionCount",params:[t,"latest"],id:1})).data.result;return parseInt(a,16)}catch(n){return console.error(n),"Error"}}async function re(t){try{let e="https://zksync2-mainnet-explorer.zksync.io/address/"+t;const n=await V.get(e);let s,a,d;return"0x0000000000000000000000000000000000000000"in n.data.info.balances?a=(parseInt(n.data.info.balances["0x0000000000000000000000000000000000000000"].balance,16)/10**18).toFixed(3):a=0,"0x3355df6d4c9c3035724fd0e3914de96a5a83aaf4"in n.data.info.balances?d=(parseInt(n.data.info.balances["0x3355df6d4c9c3035724fd0e3914de96a5a83aaf4"].balance,16)/10**6).toFixed(3):d=0,s=n.data.info.sealedNonce,{balance2:a,tx2:s,usdcBalance:d}}catch(e){return console.error(e),{balance2:"Error",tx2:"Error",usdcBalance:"Error"}}}async function ie(t){try{let e="https://api.zksync.io/jsrpc";const n=await V.post(e,{id:1,jsonrpc:"2.0",method:"account_info",params:[t]});let s;"ETH"in n.data.result.committed.balances?s=(n.data.result.committed.balances.ETH/10**18).toFixed(3):s=0;let a=n.data.result.committed.nonce;return{balance1:s,tx1:a}}catch(e){return console.error(e),{balance1:"Error",tx1:"Error"}}}const ut="6.3.0";function mt(t,e,n){const s=e.split("|").map(d=>d.trim());for(let d=0;d<s.length;d++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof t===e)return}const a=new Error(`invalid value for type ${e}`);throw a.code="INVALID_ARGUMENT",a.argument=`value.${n}`,a.value=t,a}function Re(t,e,n){for(let s in e){let a=e[s];const d=n?n[s]:null;d&&mt(a,d,s),Object.defineProperty(t,s,{enumerable:!0,value:a,writable:!1})}}function q(t){if(t==null)return"null";if(Array.isArray(t))return"[ "+t.map(q).join(", ")+" ]";if(t instanceof Uint8Array){const e="0123456789abcdef";let n="0x";for(let s=0;s<t.length;s++)n+=e[t[s]>>4],n+=e[t[s]&15];return n}if(typeof t=="object"&&typeof t.toJSON=="function")return q(t.toJSON());switch(typeof t){case"boolean":case"symbol":return t.toString();case"bigint":return BigInt(t).toString();case"number":return t.toString();case"string":return JSON.stringify(t);case"object":{const e=Object.keys(t);return e.sort(),"{ "+e.map(n=>`${q(n)}: ${q(t[n])}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function ft(t,e,n){{const a=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error(`value will overwrite populated values: ${q(n)}`);for(const d in n){const g=n[d];a.push(d+"="+q(g))}}a.push(`code=${e}`),a.push(`version=${ut}`),a.length&&(t+=" ("+a.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(t);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(t);break;default:s=new Error(t)}return Re(s,{code:e}),n&&Object.assign(s,n),s}function j(t,e,n,s){if(!t)throw ft(e,n,s)}function T(t,e,n,s){j(t,e,"INVALID_ARGUMENT",{argument:n,value:s})}["NFD","NFC","NFKD","NFKC"].reduce((t,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"){const n=String.fromCharCode(233).normalize("NFD"),s=String.fromCharCode(101,769);if(n!==s)throw new Error("broken")}t.push(e)}catch{}return t},[]);function ht(t,e,n){if(n==null&&(n=""),t!==e){let s=n,a="new";n&&(s+=".",a+=" "+n),j(!1,`private constructor; use ${s}from* methods`,"UNSUPPORTED_OPERATION",{operation:a})}}function gt(t,e,n){if(t instanceof Uint8Array)return n?new Uint8Array(t):t;if(typeof t=="string"&&t.match(/^0x([0-9a-f][0-9a-f])*$/i)){const s=new Uint8Array((t.length-2)/2);let a=2;for(let d=0;d<s.length;d++)s[d]=parseInt(t.substring(a,a+2),16),a+=2;return s}T(!1,"invalid BytesLike value",e||"value",t)}function xt(t,e){return gt(t,e,!1)}const $e=BigInt(0),W=BigInt(1),X=9007199254740991;function Ne(t,e){const n=Pe(t,"value"),s=BigInt(pe(e,"width"));if(j(n>>s===$e,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:t}),n>>s-W){const a=(W<<s)-W;return-((~n&a)+W)}return n}function Fe(t,e){const n=Pe(t,"value"),s=BigInt(pe(e,"bits"));return n&(W<<s)-W}function Be(t,e){switch(typeof t){case"bigint":return t;case"number":return T(Number.isInteger(t),"underflow",e||"value",t),T(t>=-X&&t<=X,"overflow",e||"value",t),BigInt(t);case"string":try{if(t==="")throw new Error("empty string");return t[0]==="-"&&t[1]!=="-"?-BigInt(t.substring(1)):BigInt(t)}catch(n){T(!1,`invalid BigNumberish string: ${n.message}`,e||"value",t)}}T(!1,"invalid BigNumberish value",e||"value",t)}function Pe(t,e){const n=Be(t,e);return j(n>=$e,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:t}),n}const Le="0123456789abcdef";function yt(t){if(t instanceof Uint8Array){let e="0x0";for(const n of t)e+=Le[n>>4],e+=Le[n&15];return BigInt(e)}return Be(t)}function pe(t,e){switch(typeof t){case"bigint":return T(t>=-X&&t<=X,"overflow",e||"value",t),Number(t);case"number":return T(Number.isInteger(t),"underflow",e||"value",t),T(t>=-X&&t<=X,"overflow",e||"value",t),t;case"string":try{if(t==="")throw new Error("empty string");return pe(BigInt(t),e)}catch(n){T(!1,`invalid numeric string: ${n.message}`,e||"value",t)}}T(!1,"invalid numeric value",e||"value",t)}const pt=BigInt(-1),A=BigInt(0),Q=BigInt(1),bt=BigInt(5),Y={};let ee="0000";for(;ee.length<80;)ee+=ee;function $(t){let e=ee;for(;e.length<t;)e+=e;return BigInt("1"+e.substring(0,t))}function ae(t,e,n){const s=BigInt(e.width);if(e.signed){const a=Q<<s-Q;j(n==null||t>=-a&&t<a,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t>A?t=Ne(Fe(t,s),s):t=-Ne(Fe(-t,s),s)}else{const a=Q<<s;j(n==null||t>=0&&t<a,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%a+a)%a&a-Q}return t}function Ie(t){typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,n=128,s=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const d=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);T(d,"invalid fixed format","format",t),e=d[1]!=="u",n=parseInt(d[2]),s=parseInt(d[3])}}else if(t){const d=t,g=(y,b,_)=>d[y]==null?_:(T(typeof d[y]===b,"invalid fixed format ("+y+" not "+b+")","format."+y,d[y]),d[y]);e=g("signed","boolean",e),n=g("width","number",n),s=g("decimals","number",s)}T(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),T(s<=80,"invalid FixedNumber decimals (too large)","format.decimals",s);const a=(e?"":"u")+"fixed"+String(n)+"x"+String(s);return{signed:e,width:n,decimals:s,name:a}}function kt(t,e){let n="";t<A&&(n="-",t*=pt);let s=t.toString();if(e===0)return n+s;for(;s.length<=e;)s=ee+s;const a=s.length-e;for(s=s.substring(0,a)+"."+s.substring(a);s[0]==="0"&&s[1]!==".";)s=s.substring(1);for(;s[s.length-1]==="0"&&s[s.length-2]!==".";)s=s.substring(0,s.length-1);return n+s}var E,x,N,F,P,v,O,ce,je,de,Ae,ue,Ee,me,ve;const D=class{constructor(e,n,s){B(this,F);B(this,v);B(this,ce);B(this,de);B(this,ue);B(this,me);Se(this,"format");B(this,E,void 0);B(this,x,void 0);B(this,N,void 0);Se(this,"_value");ht(e,Y,"FixedNumber"),xe(this,x,n),xe(this,E,s);const a=kt(n,s.decimals);Re(this,{format:s.name,_value:a}),xe(this,N,$(s.decimals))}get signed(){return f(this,E).signed}get width(){return f(this,E).width}get decimals(){return f(this,E).decimals}get value(){return f(this,x)}addUnsafe(e){return p(this,ce,je).call(this,e)}add(e){return p(this,ce,je).call(this,e,"add")}subUnsafe(e){return p(this,de,Ae).call(this,e)}sub(e){return p(this,de,Ae).call(this,e,"sub")}mulUnsafe(e){return p(this,ue,Ee).call(this,e)}mul(e){return p(this,ue,Ee).call(this,e,"mul")}mulSignal(e){p(this,F,P).call(this,e);const n=f(this,x)*f(e,x);return j(n%f(this,N)===A,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),p(this,v,O).call(this,n/f(this,N),"mulSignal")}divUnsafe(e){return p(this,me,ve).call(this,e)}div(e){return p(this,me,ve).call(this,e,"div")}divSignal(e){j(f(e,x)!==A,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),p(this,F,P).call(this,e);const n=f(this,x)*f(this,N);return j(n%f(e,x)===A,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),p(this,v,O).call(this,n/f(e,x),"divSignal")}cmp(e){let n=this.value,s=e.value;const a=this.decimals-e.decimals;return a>0?s*=$(a):a<0&&(n*=$(-a)),n<s||n>s?-1:0}eq(e){return this.cmp(e)===0}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=f(this,x);return f(this,x)<A&&(e-=f(this,N)-Q),e=f(this,x)/f(this,N)*f(this,N),p(this,v,O).call(this,e,"floor")}ceiling(){let e=f(this,x);return f(this,x)>A&&(e+=f(this,N)-Q),e=f(this,x)/f(this,N)*f(this,N),p(this,v,O).call(this,e,"ceiling")}round(e){if(e==null&&(e=0),e>=this.decimals)return this;const n=this.decimals-e,s=bt*$(n-1);let a=this.value+s;const d=$(n);return a=a/d*d,ae(a,f(this,E),"round"),new D(Y,a,f(this,E))}isZero(){return f(this,x)===A}isNegative(){return f(this,x)<A}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return D.fromString(this.toString(),e)}static fromValue(e,n,s){n==null&&(n=0);const a=Ie(s);let d=Be(e,"value");const g=n-a.decimals;if(g>0){const y=$(g);j(d%y===A,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),d/=y}else g<0&&(d*=$(-g));return ae(d,a,"fromValue"),new D(Y,d,a)}static fromString(e,n){const s=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);T(s&&s[2].length+s[3].length>0,"invalid FixedNumber string value","value",e);const a=Ie(n);let d=s[2]||"0",g=s[3]||"";for(;g.length<a.decimals;)g+=ee;j(g.substring(a.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),g=g.substring(0,a.decimals);const y=BigInt(s[1]+d+g);return ae(y,a,"fromString"),new D(Y,y,a)}static fromBytes(e,n){let s=yt(xt(e,"value"));const a=Ie(n);return a.signed&&(s=Ne(s,a.width)),ae(s,a,"fromBytes"),new D(Y,s,a)}};let ze=D;E=new WeakMap,x=new WeakMap,N=new WeakMap,F=new WeakSet,P=function(e){T(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)},v=new WeakSet,O=function(e,n){return e=ae(e,f(this,E),n),new D(Y,e,f(this,E))},ce=new WeakSet,je=function(e,n){return p(this,F,P).call(this,e),p(this,v,O).call(this,f(this,x)+f(e,x),n)},de=new WeakSet,Ae=function(e,n){return p(this,F,P).call(this,e),p(this,v,O).call(this,f(this,x)-f(e,x),n)},ue=new WeakSet,Ee=function(e,n){return p(this,F,P).call(this,e),p(this,v,O).call(this,f(this,x)*f(e,x)/f(this,N),n)},me=new WeakSet,ve=function(e,n){return j(f(e,x)!==A,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),p(this,F,P).call(this,e),p(this,v,O).call(this,f(this,x)*f(this,N)/f(e,x),n)};const _t=["wei","kwei","mwei","gwei","szabo","finney","ether"];function wt(t,e){let n=18;if(typeof e=="string"){const s=_t.indexOf(e);T(s>=0,"invalid unit","unit",e),n=3*s}else e!=null&&(n=pe(e,"unit"));return ze.fromValue(t,n,{decimals:n}).toString()}function De(t){return wt(t,18)}function St(t){return`${t.getUTCFullYear()}-${t.getUTCMonth()+1}-${t.getUTCDate()}`}function Tt(t){t=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),t.setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));let e=new Date(Date.UTC(t.getUTCFullYear(),0,1)),n=Math.ceil(((t-e)/864e5+1)/7);return t.getUTCFullYear()+"W"+n}function It(t){return console.log(t.getUTCFullYear()+"-"+(t.getUTCMonth()+1)),t.getUTCFullYear()+"-"+(t.getUTCMonth()+1)}async function Je(t,e,n,s,a,d,g,y){for(let b=0;b<s.length;b++){const _=new Date(Date.parse(s[b].receivedAt));if(console.log(_),t.add(St(_)),e.add(Tt(_)),n.add(It(_)),console.log(n.size),s[b].isL1Originated===!0){a++;const w=De(s[b].data.value);d+=parseFloat(w)}else if(s[b].data.contractAddress==="0x000000000000000000000000000000000000800a"){g++;const w=De(s[b].data.value);y+=parseFloat(w)}}return[t,e,n,a,d,g,y]}async function le(t){try{let e=new Set,n=new Set,s=new Set,a=0,d=0,g=0,y=0,b=0,_=0,w=0,U=0,te=null,H=null;const be="https://zksync2-mainnet-explorer.zksync.io/transactions?limit=100&direction=older&accountAddress="+t,Z=await V.get(be),ke=Z.data.total;if([e,n,s,y,b,_,w]=await Je(e,n,s,Z.data.list,y,b,_,w),ke>100)for(te=Z.data.list[0].blockNumber,H=Z.data.list[0].indexInBlock;;){let fe=`https://zksync2-mainnet-explorer.zksync.io/transactions?limit=100&direction=older&accountAddress=${t}`;te!==void 0&&H!==void 0&&U!==0&&(fe+=`&fromBlockNumber=${te}&fromTxIndex=${H}&offset=${U}`);const he=await V.get(fe),ge=he.data.list.length;if([e,n,s,y,b,_,w]=await Je(e,n,s,he.data.list,y,b,_,w),ge===100)U+=ge;else break}return a=e.size,d=n.size,g=s.size,{dayActivity:a,weekActivity:d,monthActivity:g,l1Tol2Times:y,l1Tol2Amount:b.toFixed(3),l2Tol1Times:_,l2Tol1Amount:w.toFixed(3)}}catch(e){return console.log(e),{dayActivity:"Error",weekActivity:"Error",monthActivity:"Error",l1Tol2Times:"Error",l1Tol2Amount:"Error",l2Tol1Times:"Error",l2Tol1Amount:"Error"}}}async function oe(t){const e="https://zksync2-mainnet-explorer.zksync.io/transactions?limit=5&direction=older&accountAddress="+t;try{const n=await V.get(e);if(n.data.total===0)return{zkSyncLastTx:"无交易"};{const s=n.data.list[0].receivedAt,a=new Date(s),d=8,g=new Date(a.getTime()+d*3600*1e3),y=new Date,_=new Date(y.getTime()+d*3600*1e3)-g,w=Math.floor(_/(1e3*60*60)),U=Math.floor(w/24);return U>0?{zkSyncLastTx:`${U} 天前`}:w>0?{zkSyncLastTx:`${w} 小时前`}:{zkSyncLastTx:"刚刚"}}}catch(n){return console.error(n),{zkSyncLastTx:"Error"}}}const{Content:Nt}=ot,{TextArea:zt}=ye,{Column:k,ColumnGroup:G}=Me;function Lt(){const[t,e]=L.useState([]),[n,s]=L.useState(!1),[a]=M.useForm(),[d,g]=L.useState([]),[y]=M.useForm(),[b,_]=L.useState(!1),[w,U]=L.useState(!1),[te,H]=L.useState(!1),be=async()=>{try{const r=await y.validateFields();if(r.address.length!==42){K.error({message:"错误",description:"请输入正确的地址"},2);return}_(!1);const u=t.findIndex(o=>o.address===r.address);if(u!==-1){e(t.map((i,m)=>m===u?{...i,name:r.name}:i));const o=[...t];re(r.address).then(({balance2:i,tx2:m,usdcBalance:c})=>{o[u]={...o[u],zks2_balance:i,zks2_tx_amount:m,zks2_usdcBalance:c},e(o),localStorage.setItem("addresses",JSON.stringify(t))}),oe(r.address).then(({zkSyncLastTx:i})=>{o[u]={...o[u],zks2_last_tx:i},e(o),localStorage.setItem("addresses",JSON.stringify(t))}),ie(r.address).then(({balance1:i,tx1:m})=>{o[u]={...o[u],zks1_balance:i,zks1_tx_amount:m},e(o),localStorage.setItem("addresses",JSON.stringify(t))}),ne(r.address,"ethereum").then(i=>{o[u]={...o[u],eth_balance:i},e(o),localStorage.setItem("addresses",JSON.stringify(t))}),se(r.address,"ethereum").then(i=>{o[u]={...o[u],eth_tx_amount:i},e(o),localStorage.setItem("addresses",JSON.stringify(t))}),le(r.address).then(({dayActivity:i,weekActivity:m,monthActivity:c,l1Tol2Times:h,l1Tol2Amount:S,l2Tol1Times:z,l2Tol1Amount:C})=>{o[u]={...o[u],dayActivity:i,weekActivity:m,monthActivity:c,l1Tol2Times:h,l1Tol2Amount:S,l2Tol1Times:z,l2Tol1Amount:C},e(o),localStorage.setItem("addresses",JSON.stringify(t))})}else{const o={key:t.length.toString(),name:r.name,address:r.address,eth_balance:null,eth_tx_amount:null,zks2_balance:null,zks2_tx_amount:null,zks2_usdcBalance:null,zks2_last_tx:null,zks1_balance:null,zks1_tx_amount:null,dayActivity:null,weekActivity:null,monthActivity:null,l1Tol2Times:null,l1Tol2Amount:null,l2Tol1Times:null,l2Tol1Amount:null},i=[...t,o];e(i),re(r.address).then(({balance2:m,tx2:c,usdcBalance:h})=>{o.zks2_balance=m,o.zks2_tx_amount=c,o.zks2_usdcBalance=h,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),oe(r.address).then(({zkSyncLastTx:m})=>{o.zks2_last_tx=m,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),ie(r.address).then(({balance1:m,tx1:c})=>{o.zks1_balance=m,o.zks1_tx_amount=c,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),ne(r.address,"ethereum").then(m=>{o.eth_balance=m,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),se(r.address,"ethereum").then(m=>{o.eth_tx_amount=m,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))}),le(r.address).then(({dayActivity:m,weekActivity:c,monthActivity:h,l1Tol2Times:S,l1Tol2Amount:z,l2Tol1Times:C,l2Tol1Amount:J})=>{o.dayActivity=m,o.weekActivity=c,o.monthActivity=h,o.l1Tol2Times=S,o.l1Tol2Amount=z,o.l2Tol1Times=C,o.l2Tol1Amount=J,e([...i]),localStorage.setItem("addresses",JSON.stringify(i))})}}catch(r){K.error({message:"错误",description:r.message},2)}finally{y.resetFields()}},Z=async()=>{if(!d.length){K.error({message:"错误",description:"请先选择要刷新的地址"},2);return}U(!0);try{const r=[...t];for(let u of d){const o=r.findIndex(i=>i.key===u);if(o!==-1){const i=r[o];i.eth_balance=null,i.eth_tx_amount=null,i.zks1_balance=null,i.zks1_tx_amount=null,i.zks2_balance=null,i.zks2_tx_amount=null,i.zks2_usdcBalance=null,i.zks2_last_tx=null,i.dayActivity=null,i.weekActivity=null,i.monthActivity=null,i.l1Tol2Times=null,i.l1Tol2Amount=null,i.l2Tol1Times=null,i.l2Tol1Amount=null,e([...r]),re(i.address).then(({balance2:m,tx2:c,usdcBalance:h})=>{i.zks2_balance=m,i.zks2_tx_amount=c,i.zks2_usdcBalance=h,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))}),oe(i.address).then(({zkSyncLastTx:m})=>{i.zks2_last_tx=m,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))}),ie(i.address).then(({balance1:m,tx1:c})=>{i.zks1_balance=m,i.zks1_tx_amount=c,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))}),ne(i.address,"ethereum").then(m=>{i.eth_balance=m,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))}),se(i.address,"ethereum").then(m=>{i.eth_tx_amount=m,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))}),le(i.address).then(({dayActivity:m,weekActivity:c,monthActivity:h,l1Tol2Times:S,l1Tol2Amount:z,l2Tol1Times:C,l2Tol1Amount:J})=>{i.dayActivity=m,i.weekActivity=c,i.monthActivity=h,i.l1Tol2Times=S,i.l1Tol2Amount=z,i.l2Tol1Times=C,i.l2Tol1Amount=J,e([...r]),localStorage.setItem("addresses",JSON.stringify(t))})}}}catch(r){K.error({message:"错误",description:r.message},2)}finally{U(!1),g([])}},ke=async()=>{try{const u=(await a.validateFields()).addresses.split(`
`),o=[...t];for(let i of u){if(i=i.trim(),i.length!==42){K.error({message:"错误",description:"请输入正确的地址"});continue}const m=o.findIndex(c=>c.address===i);if(m!==-1){const c=[...o];re(i).then(({balance2:h,tx2:S,usdcBalance:z})=>{c[m]={...c[m],zks2_balance:h,zks2_tx_amount:S,zks2_usdcBalance:z},e(c),localStorage.setItem("addresses",JSON.stringify(c))}),oe(i).then(({zkSyncLastTx:h})=>{c[m]={...c[m],zks2_last_tx:h},e(c),localStorage.setItem("addresses",JSON.stringify(c))}),ie(i).then(({balance1:h,tx1:S})=>{c[m]={...c[m],zks1_balance:h,zks1_tx_amount:S},e(c),localStorage.setItem("addresses",JSON.stringify(c))}),ne(i,"ethereum").then(h=>{c[m]={...c[m],eth_balance:h},e(c),localStorage.setItem("addresses",JSON.stringify(c))}),se(i,"ethereum").then(h=>{c[m]={...c[m],eth_tx_amount:h},e(c),localStorage.setItem("addresses",JSON.stringify(c))}),le(i).then(({dayActivity:h,weekActivity:S,monthActivity:z,l1Tol2Times:C,l1Tol2Amount:J,l2Tol1Times:_e,l2Tol1Amount:we})=>{c[m]={...c[m],dayActivity:h,weekActivity:S,monthActivity:z,l1Tol2Times:C,l1Tol2Amount:J,l2Tol1Times:_e,l2Tol1Amount:we},e(c),localStorage.setItem("addresses",JSON.stringify(c))})}else{const c={key:o.length.toString(),address:i,eth_balance:null,eth_tx_amount:null,zks2_balance:null,zks2_tx_amount:null,zks2_usdcBalance:null,zks1_balance:null,zks1_tx_amount:null,zks2_last_tx:null,dayActivity:null,weekActivity:null,monthActivity:null,l1Tol2Times:null,l1Tol2Amount:null,l2Tol1Times:null,l2Tol1Amount:null};o.push(c),e(o),re(i).then(({balance2:h,tx2:S,usdcBalance:z})=>{c.zks2_balance=h,c.zks2_tx_amount=S,c.zks2_usdcBalance=z,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))}),oe(i).then(({zkSyncLastTx:h})=>{c.zks2_last_tx=h,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))}),ie(i).then(({balance1:h,tx1:S})=>{c.zks1_balance=h,c.zks1_tx_amount=S,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))}),ne(i,"ethereum").then(h=>{c.eth_balance=h,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))}),se(i,"ethereum").then(h=>{c.eth_tx_amount=h,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))}),le(i).then(({dayActivity:h,weekActivity:S,monthActivity:z,l1Tol2Times:C,l1Tol2Amount:J,l2Tol1Times:_e,l2Tol1Amount:we})=>{c.dayActivity=h,c.weekActivity=S,c.monthActivity=z,c.l1Tol2Times=C,c.l1Tol2Amount=J,c.l2Tol1Times=_e,c.l2Tol1Amount=we,e([...o]),localStorage.setItem("addresses",JSON.stringify(o))})}}s(!1)}catch(r){K.error({message:"错误",description:r.message})}finally{a.resetFields(),g([])}},fe=()=>{_(!0)},he=()=>{s(!0)},ge=()=>{nt(t,"walletInfo")};L.useEffect(()=>{H(!0);const r=localStorage.getItem("addresses");setTimeout(()=>{H(!1)},500),r&&e(JSON.parse(r))},[]);const Ve=()=>{_(!1)},He=r=>{e(t.filter(u=>u.key!==r)),localStorage.setItem("addresses",JSON.stringify(t.filter(u=>u.key!==r)))},Ze=()=>{e(t.filter(r=>!d.includes(r.key))),localStorage.setItem("addresses",JSON.stringify(t.filter(r=>!d.includes(r.key)))),g([])},Ke={onChange:(r,u)=>{g(r)}},Ye=()=>{s(!1)},[Ge,Ue]=L.useState(null);return l.jsx("div",{children:l.jsxs(Nt,{children:[l.jsx(Ce,{title:"批量添加地址",open:n,onOk:ke,onCancel:Ye,okButtonProps:{loading:w},okText:"添加地址",cancelText:"取消",children:l.jsx(M,{form:a,layout:"vertical",children:l.jsx(M.Item,{label:"地址",name:"addresses",rules:[{required:!0}],children:l.jsx(zt,{placeholder:"请输入地址，每行一个",style:{width:"500px",height:"200px"}})})})}),l.jsx(Ce,{title:"添加地址",open:b,onOk:be,onCancel:Ve,okButtonProps:{loading:w},okText:"添加地址",cancelText:"取消",children:l.jsxs(M,{form:y,layout:"vertical",children:[l.jsx(M.Item,{label:"地址",name:"address",rules:[{required:!0}],children:l.jsx(ye,{placeholder:"请输入地址"})}),l.jsx(M.Item,{label:"备注",name:"name",children:l.jsx(ye,{placeholder:"请输入备注"})})]})}),l.jsx(I,{spinning:te,children:l.jsxs(Me,{rowSelection:{type:"checkbox",...Ke},dataSource:t,pagination:!1,bordered:!0,style:{marginBottom:"20px"},size:"small",children:[l.jsx(k,{title:"#",align:"center",render:(r,u,o)=>o+1},"index"),l.jsx(k,{title:"备注",dataIndex:"name",align:"center",className:"",render:(r,u)=>u.key===Ge?l.jsx(ye,{placeholder:"请输入备注",defaultValue:r,onPressEnter:i=>{u.name=i.target.value,e([...t]),localStorage.setItem("addresses",JSON.stringify(t)),Ue(null)}}):l.jsxs(l.Fragment,{children:[l.jsx(st,{color:"blue",children:r}),l.jsx(R,{shape:"circle",icon:l.jsx(at,{}),size:"small",onClick:()=>Ue(u.key)})]})},"name"),l.jsx(k,{title:"钱包地址",dataIndex:"address",align:"center"},"address"),l.jsxs(G,{title:"ETH",className:"zks_eth",children:[l.jsx(k,{title:"ETH",dataIndex:"eth_balance",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"eth_balance"),l.jsx(k,{title:"Tx",dataIndex:"eth_tx_amount",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"eth_tx_amount")]}),l.jsxs(G,{title:"zkSyncLite",className:"zks_lite",children:[l.jsx(k,{title:"ETH",dataIndex:"zks1_balance",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"zks1_balance"),l.jsx(k,{title:"Tx",dataIndex:"zks1_tx_amount",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"zks1_tx_amount")]}),l.jsxs(G,{title:"zkSyncEra",className:"zks_era",children:[l.jsx(k,{title:"ETH",dataIndex:"zks2_balance",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"zks2_balance"),l.jsx(k,{title:"USDC",dataIndex:"zks2_usdcBalance",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"zks2_usdcBalance"),l.jsx(k,{title:"Tx",dataIndex:"zks2_tx_amount",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"zks2_tx_amount"),l.jsx(k,{title:"最后交易",dataIndex:"zks2_last_tx",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):l.jsx("a",{href:"https://explorer.zksync.io/address/"+u.address,target:"_blank",children:r})},"zks2_last_tx"),l.jsxs(G,{title:"官方桥跨链Tx数",className:"",children:[l.jsx(k,{title:"L1->L2",dataIndex:"l1Tol2Times",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"l1Tol2Times"),l.jsx(k,{title:"L2->L1",dataIndex:"l2Tol1Times",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"l2Tol1Times")]}),l.jsxs(G,{title:"官方桥跨链金额(ETH)",className:"",children:[l.jsx(k,{title:"L1->L2",dataIndex:"l1Tol2Amount",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"l1Tol2Amount"),l.jsx(k,{title:"L2->L1",dataIndex:"l2Tol1Amount",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"l2Tol1Amount")]}),l.jsxs(G,{title:"活跃统计",className:"",children:[l.jsx(k,{title:"日",dataIndex:"dayActivity",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"dayActivity"),l.jsx(k,{title:"周",dataIndex:"weekActivity",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"weekActivity"),l.jsx(k,{title:"月",dataIndex:"monthActivity",align:"center",render:(r,u)=>r===null?l.jsx(I,{}):r},"monthActivity")]})]}),l.jsx(k,{className:"action",title:"操作",align:"center",render:(r,u)=>l.jsx(lt,{size:"small",children:l.jsx(rt,{title:"确认删除？",onConfirm:()=>He(u.key),children:l.jsx(R,{icon:l.jsx(Oe,{})})})})},"action")]})}),l.jsx(Xe,{children:l.jsxs("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",gap:"10px"},children:[l.jsx(R,{type:"primary",onClick:fe,size:"large",style:{width:"20%"},icon:l.jsx(it,{}),children:"添加地址"}),l.jsx(R,{type:"primary",onClick:he,size:"large",style:{width:"20%"},icon:l.jsx(Qe,{}),children:"批量添加地址"}),l.jsx(R,{type:"primary",onClick:Z,loading:w,size:"large",style:{width:"20%"},disabled:!d.length,icon:l.jsx(et,{}),children:"刷新选中地址"}),l.jsx(R,{type:"primary",danger:!0,size:"large",onConfirm:Ze,style:{width:"20%"},disabled:!d.length,icon:l.jsx(Oe,{}),children:"删除选中地址"}),l.jsx(R,{type:"primary",icon:l.jsx(tt,{}),size:"large",style:{width:"8%"},onClick:ge})]})})]})})}export{Lt as default};
